<!-- Scaffolding generated by Casein v5.0.1.0 -->

<%= javascript_include_tag 'ckeditor/ckeditor.js' %>
<%= javascript_include_tag 'ckeditor/config.js' %>
<%= javascript_include_tag 'nestedforms.js' %>

<div class="row">
	<div class="col-lg-6">
		<%= casein_select f, f.object, :category_id, Category.order(:name).collect {|c| [c.name.titlecase, c.id]},
			{:include_blank => '-- None --', :casein_label => "Choose a category"} %>
	</div>
</div>

<div class="row">
	<div class="col-lg-6">
		<%= casein_text_field f, f.object, :name %>
	</div>
	<div class="col-lg-6">
		<%= casein_select f, f.object, :venue_id, Venue.order(:name).collect {|c| [c.name.titlecase, c.id]},
			{:include_blank => '-- None --', :casein_label => "Choose a venue"} %>
	</div>

</div>

<div class="row">
	<div class="col-lg-12">
		<label>Event description</label>
		<%= cktext_area :event, :description, :cols => 40, :ckeditor => {:uiColor => '#f1f1f1', :toolbar => 'convergence'} %>
	</div>
</div>

<div class="row">
	<div class="col-lg-6">
		<%= casein_datetime_select f, f.object, :start_at %>
	</div>
	<div class="col-lg-6">
		<%= casein_datetime_select f, f.object, :end_at %>
	</div>
</div>

<div class="row">
	<div class="col-lg-6">
		<%= casein_text_field f, f.object, :price, { :casein_label => "Price (Â£)"} %>
	</div>
	<div class="col-lg-6">
		<%= casein_check_box f, f.object, :featured, { :casein_label => "Featured on homepage?"}%>
	</div>
</div>

<div class="row">
	<div class="col-lg-6">
		<%= casein_check_box f, f.object, :all_day, { :casein_label => "All-day event?"} %>
	</div>
	<div class="col-lg-6">
		
	</div>
</div>

<div class="row">
	<div class="col-lg-6">
		<%= casein_file_field f, f.object, "event", :img1 , { :casein_label => "Event image (one image only)"}%>
	</div>
	<div class="col-lg-6">
		<label class="control-label" for="event_img1">Currently loaded image:</label>
		<%= if @event.img1 then image_tag(@event.img1, width: '300') else content_tag(:span, "No image yet") end %>
	</div>
</div>

	<h2>Ticket links</h2>
	<%= f.nested_fields_for :tickets do |ff| %>
	<div class="row">
		<div class="col-lg-6">
			<div class="form-group">
				<label class="control-label" for="event_name">Name</label>
				<div class="well">
					<%= ff.text_field :name %>
				</div>
			</div>
		</div>
		<div class="col-lg-6">
			<div class="form-group">
				<label class="control-label" for="event_name">URL</label>
				<div class="well">
					<%= ff.text_field :url %><span style="margin-left: 20px"><%= ff.remove_nested_fields_link "delete this link" %></span>
				</div>
			</div>
		</div>
	</div>
	<% end %>
	<%= f.add_nested_fields_link :tickets, "Add another ticket link" %>
	
	<br />
	<br />
	<br />


<script>
$(document).on("fields_added.nested_form_fields", function(event,param) {
	console.log(event);	
});
</script>